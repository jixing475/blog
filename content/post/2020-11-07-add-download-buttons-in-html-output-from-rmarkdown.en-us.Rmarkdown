---
title: 'åœ¨RMarkdownç¼–è¯‘HTMLæ–‡ä»¶ä¸­æ·»åŠ æ•°æ®ä¸‹è½½æŒ‰é’®'
author: ZERO
date: '2020-11-07'
slug: add-download-buttons-in-html-output-from-rmarkdown.en-us
categories:
  - R
tags:
  - "\U0001F4E6"
keywords:
  - tech
thumbnailImagePosition: left
thumbnailImage: https://tva1.sinaimg.cn/large/0081Kckwgy1gkg8yzesnij30dc0dcgm3.jpg
metaAlignment: center
coverMeta: out
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo=TRUE, eval=FALSE,
	message = FALSE,
	warning = FALSE
)
```

<!--more-->

ä»‹ç»ä¸€ä¸ªå·¥å…·åŒ…, ä¸»è¦æ˜¯ç”¨æ¥è§£å†³æˆ‘å¹³å¸¸å†™æ–‡æ¡£æ—¶æ–‡æ¡£å’Œç»“æœåˆ†ç¦»çš„é—®é¢˜.

å®ƒå¯ä»¥åœ¨ RMarkdown è¾“å‡ºçš„ HTML æ–‡ä»¶ä¸­æ·»åŠ ä¸‹è½½æ•°æ®çš„æŒ‰é’®, è€Œä¸éœ€è¦è¿è¡Œ shiny æ¨¡å¼. 

ä¸‹è½½çš„æ•°æ®çš„ç±»å‹åŒ…æ‹¬: æ•°æ®æ¡†, åˆ—è¡¨å’Œä»»ä½• R å¯¹è±¡


## å®‰è£…
```{r echo=TRUE, eval=FALSE}
install.packages("downloadthis")

# install.packages("remotes")
remotes::install_github("fmmattioni/downloadthis")
```


## ä½¿ç”¨

### ä»å…¨å±€å˜é‡ä¸­ä¸‹è½½æ•°æ®æ¡†

1. æ–‡ä»¶åå’Œè·¯å¾„éƒ½å¯ä»¥æ›´æ”¹
2. æ–‡ä»¶ç±»å‹å¯ä»¥æ˜¯ä»¥ä¸‹ä¸‰ç§: ä¾‹å¦‚ csv, xlsx å’Œ .rds. 

```{r}
library(downloadthis)

mtcars %>% 
  download_this(
    output_name = "mtcars data set",
    output_extension = ".csv", # è¾“å‡ºçš„æ–‡ä»¶ç±»å‹
    csv2 = FALSE,
    button_label = "Download data",
    button_type = "warning",
    has_icon = TRUE,
    icon = "fa fa-save"
  )
```

```{r}
mtcars %>% 
  download_this(
    output_name = "mtcars data set",
    output_extension = ".xlsx", # è¾“å‡ºçš„æ–‡ä»¶ç±»å‹
    csv2 = FALSE,
    button_label = "Download data",
    button_type = "warning",
    has_icon = TRUE,
    icon = "fa fa-save"
  )
```

### ä»å…¨å±€å˜é‡ä¸­ä¸‹è½½å…¶ä»–ç±»å‹å¯¹è±¡

å¯¹äºéæ•°æ®æ¡†å¯ä»¥ä¿å­˜ä¸º `.rds`, å¹¶ä¸”å¯ä»¥å¤šä¸ªå¯¹è±¡åŒæ—¶ä¿å­˜.

```{r}
vector_example <- 1:10
linear_model <- lm(mpg ~ gear, data = mtcars)

list(mtcars, iris, vector_example, linear_model) %>%
  download_this(
    output_name = "datasets, vector, and linear model",
    output_extension = ".rds",
    button_label = "Download as rds",
    button_type = "success",
    has_icon = TRUE,
    icon = "fa fa-save"
  )
```

### ä»ç½‘ä¸Šä¸‹è½½

è¿™é‡Œæ˜¯æŒ‡æŠŠä¸‹è½½æŒ‡å‘äº’è”ç½‘çš„ä¸‹è½½é“¾æ¥.
è¿™å°±éå¸¸æ–¹ä¾¿äº†, ä½ å¯ä»¥æŠŠä½ æ‰€æœ‰è¦ä¸‹è½½çš„ä¸œè¥¿ä¸Šä¼ åˆ°: Dropbox æˆ–è€… GitHub æˆ–è€…å…¶ä»–ç½‘ç›˜çš„ä¸‹è½½é“¾æ¥. å½“ç„¶æˆ‘å–œæ¬¢çš„ Dropbox, å› ä¸ºæˆ‘å¯ä»¥åœ¨å‰é¢å¯¹æƒ³è¦ä¸‹è½½çš„æ–‡ä»¶, åœ¨ Dropbox è¿›è¡Œå¤‡ä»½å­˜å‚¨, å†æŠŠ Dropbox çš„ä¸‹è½½åœ°å€æŒ‡å‘è¿™é‡Œ.

```{r}
## Link in Github repo
download_link(
  link = "https://github.com/fmmattioni/downloadthis/raw/master/inst/example/file_1.pdf",
  button_label = "Download pdf file",
  button_type = "danger",
  has_icon = TRUE,
  icon = "fa fa-save",
  self_contained = FALSE
)
```

### ä¸‹è½½æœ¬åœ°æ–‡ä»¶

è¿™ä¸ªå¯¹äºå¤§çš„æ–‡ä»¶ä¸‹è½½éå¸¸æœ‰æ•ˆ, ä½ å¯ä»¥æŠŠç›¸å…³æ–‡ä»¶æ‰“åŒ…åˆ°ä¸€èµ·, å¢æ·»ç›¸å¯¹æœ¬åœ°è·¯å¾„(å·¥ä½œç›®å½•ä¸ HTML æ‰€åœ¨çš„æ–‡ä»¶åœ°å€æ˜¯ä¸€æ ·çš„), è¿›è¡Œä¸‹è½½.

```{r}
## One file example
download_file(
  path = "untitled folder/all.min.css",
  output_name = "CSS file from downloadthis",
  button_label = "Download css file",
  button_type = "danger",
  has_icon = TRUE,
  icon = "fa fa-save",
  self_contained = FALSE
)
```

### ä¸‹è½½æœ¬åœ°æ–‡ä»¶å¤¹

æ–‡ä»¶ä¼šä»¥æ‰“åŒ…çš„å½¢å¼ä¸‹è½½(åç¼€åä¸º`.zip`)

```{r}
## Directory path as an example
download_dir(
  path = "untitled folder",
  output_name = "example dir",
  button_label = "Download directory",
  button_type = "success",
  has_icon = TRUE,
  icon = "fa fa-save",
  self_contained = FALSE
)
```

## links

[fmmattioni/downloadthis: Implement Download Buttons in rmarkdown ğŸ’¾](https://github.com/fmmattioni/downloadthis)


